<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krishi Sahayak</title>
    <link rel="icon" href="logo002.PNG">
    <link rel="stylesheet" href="new.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
   <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="navbar">
        <img src="logo002.PNG" alt="KRISHI SAHAYAK" id="mainlogo">
        <h1 id="title">KRISHI SAHAYAK</h1>
        <div id="navbuttons">
            <a href="newfaq.html"><i class="fa-regular fa-circle-question" id="userlogin"></i>FAQ's</a>
        </div>
    </div>
    <div class="main">
        <div style="font-family: Arial, sans-serif; text-align: center; padding: 20px;">
        <h1>Weather Forecast</h1>
        
        <div style="margin-bottom: 20px; display: flex; justify-content: center; align-items: center; gap: 10px; flex-wrap: wrap;">
            <label for="lang-select" style="font-weight: bold;">Language:</label>
            <select id="lang-select" style="padding: 10px; border-radius: 8px; border: 1px solid #ccc;">
                <option value="en" selected>English</option>
                <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option>
                <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
                <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
            </select>
            <input type="text" id="city-input" placeholder="Enter your city..." style="padding: 10px; border: 1px solid #ccc; border-radius: 8px;">
            <button id="today-btn" onclick="getForecast('today')" style="padding: 10px 20px; border: none; border-radius: 8px; background-color: #4CAF50; color: white; cursor: pointer;">Today</button>
            <button id="tomorrow-btn" onclick="getForecast('tomorrow')" style="padding: 10px 20px; border: none; border-radius: 8px; background-color: #2196F3; color: white; cursor: pointer;">Tomorrow</button>
            <button id="five-day-btn" onclick="getForecast('5day')" style="padding: 10px 20px; border: none; border-radius: 8px; background-color: #f44336; color: white; cursor: pointer;">5-Day Forecast</button>
        </div>

        <div id="weather-display" style="border: 1px solid #ccc; padding: 20px; border-radius: 8px; max-width: 600px; margin: 0 auto; display: none;">
            <h3 id="weather-location"></h3>
            <div id="forecast-container" style="display: flex; flex-direction: column; gap: 15px; margin-top: 20px;"></div>
        </div>
        
        <p id="status-message" style="color: red; margin-top: 20px;"></p>
    </div>

    <script>
        // Constants for the OpenWeatherMap API
        const OPENWEATHER_API_KEY = 'e5376347f8700e140fd1b6178680ef77'; 
        const OPENWEATHER_GEO_API_URL = 'https://api.openweathermap.org/geo/1.0/direct';
        const OPENWEATHER_FORECAST_API_URL = 'https://api.openweathermap.org/data/2.5/forecast';

        const translations = {
            en: {
                placeholder: 'Enter your city...',
                todayBtn: 'Today',
                tomorrowBtn: 'Tomorrow',
                fiveDayBtn: '5-Day Forecast',
                enterCity: 'Please enter a city.',
                checking: 'Checking weather for',
                locationNotFound: 'Location not found.',
                forecastNotAvailable: 'Forecast data not available.',
                weatherIn: 'Weather in',
                tomorrowNotAvailable: 'Tomorrow\'s forecast not available.',
                temperature: 'Temperature',
                conditions: 'Conditions',
                humidity: 'Humidity',
                windSpeed: 'Wind Speed',
                apiError: 'Weather API Error: '
            },
            hi: {
                placeholder: '‡§Ö‡§™‡§®‡§æ ‡§∂‡§π‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç...',
                todayBtn: '‡§Ü‡§ú',
                tomorrowBtn: '‡§ï‡§≤',
                fiveDayBtn: '5-‡§¶‡§ø‡§® ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®',
                enterCity: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§∂‡§π‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§',
                checking: '‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§Å‡§ö ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à',
                locationNotFound: '‡§∏‡•ç‡§•‡§æ‡§® ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§',
                forecastNotAvailable: '‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§® ‡§°‡•á‡§ü‡§æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§',
                weatherIn: '‡§Æ‡•å‡§∏‡§Æ ‡§Æ‡•á‡§Ç',
                tomorrowNotAvailable: '‡§ï‡§≤ ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§® ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§',
                temperature: '‡§§‡§æ‡§™‡§Æ‡§æ‡§®',
                conditions: '‡§∂‡§∞‡•ç‡§§‡•á‡§Ç',
                humidity: '‡§®‡§Æ‡•Ä',
                windSpeed: '‡§π‡§µ‡§æ ‡§ï‡•Ä ‡§ó‡§§‡§ø',
                apiError: '‡§Æ‡•å‡§∏‡§Æ ‡§è‡§™‡•Ä‡§Ü‡§à ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: '
            },
            te: {
                placeholder: '‡∞Æ‡±Ä ‡∞®‡∞ó‡∞∞‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø...',
                todayBtn: '‡∞à‡∞∞‡±ã‡∞ú‡±Å',
                tomorrowBtn: '‡∞∞‡±á‡∞™‡±Å',
                fiveDayBtn: '5-‡∞∞‡±ã‡∞ú‡±Å‡∞≤ ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç',
                enterCity: '‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞í‡∞ï ‡∞®‡∞ó‡∞∞‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞®‡∞Æ‡±ã‡∞¶‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.',
                checking: '‡∞ï‡±ã‡∞∏‡∞Ç ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç ‡∞§‡∞®‡∞ø‡∞ñ‡±Ä ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø',
                locationNotFound: '‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç ‡∞¶‡±ä‡∞∞‡∞ï‡∞≤‡±á‡∞¶‡±Å.',
                forecastNotAvailable: '‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç ‡∞°‡±á‡∞ü‡∞æ ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã ‡∞≤‡±á‡∞¶‡±Å.',
                weatherIn: '‡∞≤‡±ã ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç',
                tomorrowNotAvailable: '‡∞∞‡±á‡∞™‡∞ü‡∞ø ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã ‡∞≤‡±á‡∞¶‡±Å.',
                temperature: '‡∞â‡∞∑‡±ç‡∞£‡±ã‡∞ó‡±ç‡∞∞‡∞§',
                conditions: '‡∞™‡∞∞‡∞ø‡∞∏‡±ç‡∞•‡∞ø‡∞§‡±Å‡∞≤‡±Å',
                humidity: '‡∞§‡±á‡∞Æ',
                windSpeed: '‡∞ó‡∞æ‡∞≤‡∞ø ‡∞µ‡±á‡∞ó‡∞Ç',
                apiError: '‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£ API ‡∞≤‡±ã‡∞™‡∞Ç: '
            },
            ta: {
                placeholder: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ®‡Æï‡Æ∞‡Æ§‡Øç‡Æ§‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç...',
                todayBtn: '‡Æá‡Æ©‡Øç‡Æ±‡ØÅ',
                tomorrowBtn: '‡Æ®‡Ææ‡Æ≥‡Øà',
                fiveDayBtn: '5-‡Æ®‡Ææ‡Æ≥‡Øç ‡ÆÆ‡ØÅ‡Æ©‡Øç‡Æ©‡Æ±‡Æø‡Æµ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ',
                enterCity: '‡Æ§‡ÆØ‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æí‡Æ∞‡ØÅ ‡Æ®‡Æï‡Æ∞‡Æ§‡Øç‡Æ§‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç.',
                checking: '‡Æµ‡Ææ‡Æ©‡Æø‡Æ≤‡Øà ‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ',
                locationNotFound: '‡Æá‡Æü‡ÆÆ‡Øç ‡Æï‡Ææ‡Æ£‡Æ™‡Øç‡Æ™‡Æü‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà.',
                forecastNotAvailable: '‡ÆÆ‡ØÅ‡Æ©‡Øç‡Æ©‡Æ±‡Æø‡Æµ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ§‡Æ∞‡Æµ‡ØÅ ‡Æï‡Æø‡Æü‡Øà‡Æï‡Øç‡Æï‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà.',
                weatherIn: '‡Æµ‡Ææ‡Æ©‡Æø‡Æ≤‡Øà',
                tomorrowNotAvailable: '‡Æ®‡Ææ‡Æ≥‡Øà‡Æï‡Øç‡Æï‡Ææ‡Æ© ‡ÆÆ‡ØÅ‡Æ©‡Øç‡Æ©‡Æ±‡Æø‡Æµ‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æï‡Æø‡Æü‡Øà‡Æï‡Øç‡Æï‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà.',
                temperature: '‡Æµ‡ØÜ‡Æ™‡Øç‡Æ™‡Æ®‡Æø‡Æ≤‡Øà',
                conditions: '‡Æ®‡Æø‡Æ™‡Æ®‡Øç‡Æ§‡Æ©‡Øà‡Æï‡Æ≥‡Øç',
                humidity: '‡Æà‡Æ∞‡Æ™‡Øç‡Æ™‡Æ§‡ÆÆ‡Øç',
                windSpeed: '‡Æï‡Ææ‡Æ±‡Øç‡Æ±‡ØÅ ‡Æµ‡Øá‡Æï‡ÆÆ‡Øç',
                apiError: '‡Æµ‡Ææ‡Æ©‡Æø‡Æ≤‡Øà API ‡Æ™‡Æø‡Æ¥‡Øà: '
            },
            ml: {
                placeholder: '‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥®‡¥ó‡¥∞‡¥Ç ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï...',
                todayBtn: '‡¥á‡¥®‡µç‡¥®‡µç',
                tomorrowBtn: '‡¥®‡¥æ‡¥≥‡µÜ',
                fiveDayBtn: '5-‡¥¶‡¥ø‡¥µ‡¥∏‡¥§‡µç‡¥§‡µÜ ‡¥™‡µç‡¥∞‡¥µ‡¥ö‡¥®‡¥Ç',
                enterCity: '‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥í‡¥∞‡µÅ ‡¥®‡¥ó‡¥∞‡¥Ç ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï.',
                checking: '‡¥µ‡µá‡¥£‡µç‡¥ü‡¥ø ‡¥ï‡¥æ‡¥≤‡¥æ‡¥µ‡¥∏‡µç‡¥• ‡¥™‡¥∞‡¥ø‡¥∂‡µã‡¥ß‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ',
                locationNotFound: '‡¥∏‡µç‡¥•‡¥≤‡¥Ç ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥ø‡¥Ø‡¥ø‡¥≤‡µç‡¥≤.',
                forecastNotAvailable: '‡¥™‡µç‡¥∞‡¥µ‡¥ö‡¥® ‡¥°‡¥æ‡¥±‡µç‡¥± ‡¥≤‡¥≠‡µç‡¥Ø‡¥Æ‡¥≤‡µç‡¥≤.',
                weatherIn: '‡¥≤‡µÜ ‡¥ï‡¥æ‡¥≤‡¥æ‡¥µ‡¥∏‡µç‡¥•',
                tomorrowNotAvailable: '‡¥®‡¥æ‡¥≥‡¥§‡µç‡¥§‡µÜ ‡¥™‡µç‡¥∞‡¥µ‡¥ö‡¥®‡¥Ç ‡¥≤‡¥≠‡µç‡¥Ø‡¥Æ‡¥≤‡µç‡¥≤.',
                temperature: '‡¥§‡¥æ‡¥™‡¥®‡¥ø‡¥≤',
                conditions: '‡¥∏‡¥æ‡¥π‡¥ö‡¥∞‡µç‡¥Ø‡¥ô‡µç‡¥ô‡µæ',
                humidity: '‡¥à‡µº‡¥™‡µç‡¥™‡¥Ç',
                windSpeed: '‡¥ï‡¥æ‡¥±‡µç‡¥±‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥µ‡µá‡¥ó‡¥§',
                apiError: '‡¥ï‡¥æ‡¥≤‡¥æ‡¥µ‡¥∏‡µç‡¥• API ‡¥™‡¥ø‡¥∂‡¥ï‡µç: '
            },
            kn: {
                placeholder: '‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤®‡≤ó‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤Æ‡≥Ç‡≤¶‡≤ø‡≤∏‡≤ø...',
                todayBtn: '‡≤á‡≤Ç‡≤¶‡≥Å',
                tomorrowBtn: '‡≤®‡≤æ‡≤≥‡≥Ü',
                fiveDayBtn: '5-‡≤¶‡≤ø‡≤®‡≤¶ ‡≤Æ‡≥Å‡≤®‡≥ç‡≤∏‡≥Ç‡≤ö‡≤®‡≥Ü',
                enterCity: '‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤í‡≤Ç‡≤¶‡≥Å ‡≤®‡≤ó‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤Æ‡≥Ç‡≤¶‡≤ø‡≤∏‡≤ø.',
                checking: '‡≤π‡≤µ‡≤æ‡≤Æ‡≤æ‡≤®‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥Ü',
                locationNotFound: '‡≤∏‡≥ç‡≤•‡≤≥ ‡≤ï‡≤Ç‡≤°‡≥Å‡≤¨‡≤Ç‡≤¶‡≤ø‡≤≤‡≥ç‡≤≤.',
                forecastNotAvailable: '‡≤Æ‡≥Å‡≤®‡≥ç‡≤∏‡≥Ç‡≤ö‡≤®‡≥Ü ‡≤°‡≥á‡≤ü‡≤æ ‡≤≤‡≤≠‡≥ç‡≤Ø‡≤µ‡≤ø‡≤≤‡≥ç‡≤≤.',
                weatherIn: '‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤π‡≤µ‡≤æ‡≤Æ‡≤æ‡≤®',
                tomorrowNotAvailable: '‡≤®‡≤æ‡≤≥‡≥Ü ‡≤Æ‡≥Å‡≤®‡≥ç‡≤∏‡≥Ç‡≤ö‡≤®‡≥Ü ‡≤≤‡≤≠‡≥ç‡≤Ø‡≤µ‡≤ø‡≤≤‡≥ç‡≤≤.',
                temperature: '‡≤§‡≤æ‡≤™‡≤Æ‡≤æ‡≤®',
                conditions: '‡≤∑‡≤∞‡≤§‡≥ç‡≤§‡≥Å‡≤ó‡≤≥‡≥Å',
                humidity: '‡≤Ü‡≤∞‡≥ç‡≤¶‡≥ç‡≤∞‡≤§‡≥Ü',
                windSpeed: '‡≤ó‡≤æ‡≤≥‡≤ø‡≤Ø ‡≤µ‡≥á‡≤ó',
                apiError: '‡≤π‡≤µ‡≤æ‡≤Æ‡≤æ‡≤® API ‡≤¶‡≥ã‡≤∑: '
            },
            mr: {
                placeholder: '‡§§‡•Å‡§Æ‡§ö‡•á ‡§∂‡§π‡§∞ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ...',
                todayBtn: '‡§Ü‡§ú',
                tomorrowBtn: '‡§â‡§¶‡•ç‡§Ø‡§æ',
                fiveDayBtn: '5-‡§¶‡§ø‡§µ‡§∏‡§æ‡§Ç‡§ö‡§æ ‡§Ö‡§Ç‡§¶‡§æ‡§ú',
                enterCity: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§∂‡§π‡§∞ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ.',
                checking: '‡§∏‡§æ‡§†‡•Ä ‡§π‡§µ‡§æ‡§Æ‡§æ‡§® ‡§§‡§™‡§æ‡§∏‡§§ ‡§Ü‡§π‡•á',
                locationNotFound: '‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡§æ‡§™‡§°‡§≤‡•á ‡§®‡§æ‡§π‡•Ä.',
                forecastNotAvailable: '‡§Ö‡§Ç‡§¶‡§æ‡§ú‡§æ‡§ö‡•á ‡§°‡•á‡§ü‡§æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§æ‡§π‡•Ä.',
                weatherIn: '‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§π‡§µ‡§æ‡§Æ‡§æ‡§®',
                tomorrowNotAvailable: '‡§â‡§¶‡•ç‡§Ø‡§æ‡§ö‡§æ ‡§Ö‡§Ç‡§¶‡§æ‡§ú ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§æ‡§π‡•Ä.',
                temperature: '‡§§‡§æ‡§™‡§Æ‡§æ‡§®',
                conditions: '‡§Ö‡§ü‡•Ä',
                humidity: '‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞‡§§‡§æ',
                windSpeed: '‡§µ‡§æ‡§±‡•ç‡§Ø‡§æ‡§ö‡§æ ‡§µ‡•á‡§ó',
                apiError: '‡§π‡§µ‡§æ‡§Æ‡§æ‡§® API ‡§§‡•ç‡§∞‡•Å‡§ü‡•Ä: '
            }
        };

        function getTranslation(key, lang) {
            return translations[lang][key] || translations['en'][key];
        }

        async function getForecast(period) {
            const cityInput = document.getElementById('city-input');
            const location = cityInput.value.trim();
            const statusMessage = document.getElementById('status-message');
            const weatherDisplay = document.getElementById('weather-display');
            const forecastContainer = document.getElementById('forecast-container');
            const lang = document.getElementById('lang-select').value;
            const t = key => getTranslation(key, lang);
            
            // Update button texts based on language
            document.getElementById('today-btn').textContent = t('todayBtn');
            document.getElementById('tomorrow-btn').textContent = t('tomorrowBtn');
            document.getElementById('five-day-btn').textContent = t('fiveDayBtn');
            cityInput.placeholder = t('placeholder');


            if (!location) {
                statusMessage.textContent = t('enterCity');
                return;
            }

            statusMessage.textContent = `${t('checking')} ${location}...`;
            weatherDisplay.style.display = 'none';
            forecastContainer.innerHTML = ''; // Clear previous forecasts
            document.getElementById('weather-location').textContent = '';

            try {
                // First, get the geographic coordinates for the city
                const geoResponse = await fetch(`${OPENWEATHER_GEO_API_URL}?q=${location}&limit=1&appid=${OPENWEATHER_API_KEY}`);
                const geoData = await geoResponse.json();

                if (!geoData || geoData.length === 0) {
                    throw new Error(t('locationNotFound'));
                }

                const { lat, lon } = geoData[0];

                // Then, get the 5-day / 3-hour weather forecast with the specified language
                const weatherResponse = await fetch(`${OPENWEATHER_FORECAST_API_URL}?lat=${lat}&lon=${lon}&appid=${OPENWEATHER_API_KEY}&units=metric&lang=${lang}`);
                const weatherData = await weatherResponse.json();

                if (weatherData.cod !== '200') {
                    throw new Error(weatherData.message || t('forecastNotAvailable'));
                }

                document.getElementById('weather-location').textContent = `${t('weatherIn')} ${location}`;

                const dailyForecasts = {};
                weatherData.list.forEach(item => {
                    const date = new Date(item.dt * 1000).toLocaleDateString(lang);
                    if (!dailyForecasts[date]) {
                        dailyForecasts[date] = {
                            date: item.dt,
                            temp: {
                                max: item.main.temp_max,
                                min: item.main.temp_min
                            },
                            weather: item.weather,
                            humidity: item.main.humidity,
                            wind_speed: item.wind.speed
                        };
                    } else {
                        dailyForecasts[date].temp.max = Math.max(dailyForecasts[date].temp.max, item.main.temp_max);
                        dailyForecasts[date].temp.min = Math.min(dailyForecasts[date].temp.min, item.main.temp_min);
                    }
                });

                const dates = Object.keys(dailyForecasts).sort();

                // Determine which forecast to display
                if (period === 'today') {
                    if (dates.length > 0) {
                        displayDailyForecast(dailyForecasts[dates[0]], lang, t);
                    }
                } else if (period === 'tomorrow') {
                    if (dates.length > 1) {
                        displayDailyForecast(dailyForecasts[dates[1]], lang, t);
                    } else {
                        throw new Error(t('tomorrowNotAvailable'));
                    }
                } else if (period === '5day') {
                    dates.forEach((dateKey, index) => {
                        const dayData = dailyForecasts[dateKey];
                        const dayLabel = index === 0 ? t('today') : new Date(dayData.date * 1000).toLocaleDateString(lang, { weekday: 'long', month: 'short', day: 'numeric' });
                        displayDailyForecast(dayData, lang, t, dayLabel);
                    });
                }
                
                weatherDisplay.style.display = 'block';
                statusMessage.textContent = '';

            } catch (error) {
                console.error('Weather API Error:', error);
                statusMessage.textContent = `${t('apiError')} ${error.message}. Please try again later.`;
                weatherDisplay.style.display = 'none';
            }
        }

        function displayDailyForecast(dayData, lang, t, dateLabel = '') {
            const forecastContainer = document.getElementById('forecast-container');
            
            const card = document.createElement('div');
            card.style.cssText = `
                display: flex;
                flex-direction: column;
                align-items: center;
                border: 1px solid #ddd;
                padding: 15px;
                border-radius: 8px;
                background-color: #f9f9f9;
                width: 100%;
                box-sizing: border-box;
            `;

            const date = dateLabel || new Date(dayData.date * 1000).toDateString();
            card.innerHTML = `
                <h4 style="margin: 0; padding: 0;">${date}</h4>
                <img src="https://openweathermap.org/img/wn/${dayData.weather[0].icon}@2x.png" alt="Weather icon">
                <p style="margin: 5px 0;">${t('temperature')}: <strong>${Math.round(dayData.temp.min)}¬∞C - ${Math.round(dayData.temp.max)}¬∞C</strong></p>
                <p style="margin: 5px 0;">${t('conditions')}: ${dayData.weather[0].description}</p>
                <p style="margin: 5px 0;">${t('humidity')}: ${dayData.humidity}%</p>
                <p style="margin: 5px 0;">${t('windSpeed')}: ${dayData.wind_speed} m/s</p>
            `;

            forecastContainer.appendChild(card);
        }

        // Initialize button text on load
        window.onload = function() {
            const lang = document.getElementById('lang-select').value;
            const t = key => getTranslation(key, lang);
            document.getElementById('today-btn').textContent = t('todayBtn');
            document.getElementById('tomorrow-btn').textContent = t('tomorrowBtn');
            document.getElementById('five-day-btn').textContent = t('fiveDayBtn');
            document.getElementById('city-input').placeholder = t('placeholder');
        }
    </script>
        <div class="container">
            <img src="logo002.PNG" alt="KRISHI SAHAYAK" id="contimg">
    <h1>KRISHI SAHAYAK</h1>
    <p style="color:#666;margin-bottom:15px;">Ask any agricultural question and get AI-powered answers!</p>

    <!-- Language selection -->
    <label for="lang-select">Choose Language:</label>
    <select id="lang-select">
      <option value="en-IN" selected>English</option>
      <option value="te-IN">Telugu</option>
      <option value="hi-IN">Hindi</option>
      <option value="ml-IN">Malayalam</option>
      <option value="ta-IN">Tamil</option>
      <option value="kn-IN">Kannada</option>
      <option value="mr-IN">Marathi</option>
    </select>

    <div class="controls">
      <input type="text" id="user-input" placeholder="Ask your agricultural question in any language..." onkeypress="handleKeyPress(event)">
      <button id="mic-btn" class="icon-btn">üé§</button>
    </div>
    <button onclick="sendQuery()">Submit</button>

    <div id="response-container">
      <button class="speaker-button" id="pause-btn">‚è∏Ô∏è</button>
      <button class="speaker-button" id="stop-btn">‚èπÔ∏è</button>
    </div>
  </div>


    </div>

    <div class="endbar">
        <p style="text-align: center; ">"Designed and developed by "Team 404 not found" for SIH Internal hackathon at SR University</p>
        <a href="" id="Git" style="color: white; text-decoration: underline;">Github Repository</a>
    </div>
    <script src="new.js"></script>
</body>
</html>
